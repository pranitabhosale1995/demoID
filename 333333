const refreshToken = async () => {
  const res = await axios.post(
    "http://localhost:1000/auth/refresh-token",
    {},
    { withCredentials: true }
  );

  const newToken = res.data.token; // âœ” backend confirm à¤•à¥‡à¤²à¤‚à¤¸
  dispatch(setToken(newToken));    // redux update
  return newToken;                 // ðŸ”‘ IMPORTANT
};



if (
  err.response?.status === 401 &&
  err.response?.data?.error === "TOKEN_EXPIRED"
) {
  try {
    const newToken = await refreshToken();

    // same API retry with new token
    config.headers.Authorization = `Bearer ${newToken}`;

    const retryResponse = await axios(config);
    setData(retryResponse.data);

    return returnDataOnly ? retryResponse.data : retryResponse;
  } catch (e) {
    navigate("/");
    throw e;
  }
}
